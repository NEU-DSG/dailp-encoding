{
  "db_name": "PostgreSQL",
  "query": "-- Binds: document_id, slice_id, include_in_edited_collection, editor_id\n\nwith document_update as (\n  -- update ingested audio, if the slice_id was ingested audio\n  update document\n  set include_audio_in_edited_collection=$3,\n      audio_edited_by=$4\n  where document.id = $1\n    -- if the slice_id given doesn't match, we won't update\n    and document.audio_slice_id = $2 \n  returning document.id as document_id\n),\ndocument_user_media_update as (\n-- update user contributed audio, if the slice id is user contributed audio tied to the document\n  update document_user_media\n  set include_in_edited_collection=$3,\n      edited_by=$4\n  where document_id = $1\n    and media_slice_id = $2\n    returning document_id\n)\n\nselect distinct t.document_id\nfrom (\n  select document_id from document_update\n  union\n  select document_id from document_user_media_update\n) as t",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "document_id",
        "type_info": "Uuid"
      }
    ],
    "parameters": {
      "Left": [
        "Uuid",
        "Uuid",
        "Bool",
        "Uuid"
      ]
    },
    "nullable": [
      null
    ]
  },
  "hash": "2602151b0b02e7def582ae9adf17a0153514378a068b267334fe90e69e97b363"
}
