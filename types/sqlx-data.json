{
  "db": "PostgreSQL",
  "0004c050a9007c9f1ca0f6731433b9c756632da10d5e513d3dcbcbbdd1ec8811": {
    "query": "select full_name\nfrom contributor\nwhere full_name = any($1)\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "full_name",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "TextArray"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "0a7e8a0aaa1382daa8686211d2e0469e86cf302d41a282643266908e93179718": {
    "query": "select *\nfrom paragraph\nwhere page_id = any($1)\norder by character_range asc\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "page_id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 2,
          "name": "character_range",
          "type_info": "Int8Range"
        },
        {
          "ordinal": 3,
          "name": "english_translation",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "UuidArray"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false
      ]
    }
  },
  "14b4d473829b2323656869142a4e6f226c16b6cd4aa2427bc1ce0f9f3a7f81fb": {
    "query": "INSERT INTO document (id, title, is_reference, written_at, audio_slice_id, group_id, index_in_group)\nVALUES ($1, $2, $3, $4, $5, $6, $7)\nON CONFLICT DO NOTHING\n",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Bool",
          "Date",
          "Uuid",
          "Uuid",
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "1a84b30968c23a43db9b9f48c9caede965d6c1ddb79d62a5ca81139fe6ceb441": {
    "query": "select\n  morpheme_gloss.id as gloss_id,\n  morpheme_gloss.example_shape,\n  abbreviation_system.short_name as system_name,\n  morpheme_tag.gloss,\n  abstract_morpheme_tag.title,\n  abstract_morpheme_tag.description,\n  abstract_morpheme_tag.linguistic_type\nfrom morpheme_gloss\n  inner join abstract_morpheme_tag on abstract_morpheme_tag.id = morpheme_gloss.tag_id\n  left join abbreviation_system on abbreviation_system.short_name = any($2)\n  inner join morpheme_tag on morpheme_tag.abstract_ids[1] = abstract_morpheme_tag.id\nwhere morpheme_gloss.gloss = any($1)\n  and morpheme_tag.system_id = abbreviation_system.id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "gloss_id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "example_shape",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "system_name",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "gloss",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "title",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "description",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "linguistic_type",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "TextArray",
          "TextArray"
        ]
      },
      "nullable": [
        true,
        true,
        true,
        true,
        true,
        true,
        true
      ]
    }
  },
  "2874ae8f9cec1ce09c268adc74b096a15ca1d90cbb324289c679df9e451cb2ee": {
    "query": "-- Delete all document pages, which will cascade to delete all associated\n-- paragraphs and words.\ndelete from document_page\nwhere document_id = $1\n",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "2a36ddc21ac1db7d812481263fb92bf12e789150b1b0a46a116bbc95130b8c7f": {
    "query": "select\n  id,\n  source_text,\n  simple_phonetics,\n  phonemic,\n  english_gloss,\n  commentary,\n  document_id,\n  index_in_document,\n  page_number\nfrom word\nwhere source_text ilike $1\n  or simple_phonetics ilike $1\n  or english_gloss ilike $1\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "source_text",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "simple_phonetics",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "phonemic",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "english_gloss",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "commentary",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "document_id",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "index_in_document",
          "type_info": "Int8"
        },
        {
          "ordinal": 8,
          "name": "page_number",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        true,
        true,
        true,
        true,
        false,
        false,
        true
      ]
    }
  },
  "2b7795f46ccb6de4388240a331fcebac900b257d8fb38bfc3d495beb0c5d748d": {
    "query": "insert into abstract_morpheme_tag (internal_gloss, title, description, linguistic_type)\nvalues ($1, $2, $3, $4)\non conflict (internal_gloss) do update\n   set title = excluded.title,\n       description = excluded.description,\n       linguistic_type = excluded.linguistic_type\nreturning id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "2be9806efa5a7e3a7fd13a32dc17fd1aeb75110ab477fb7cfbd469ad20e54fd9": {
    "query": "INSERT INTO word_segment (word_id, index_in_word, morpheme, gloss_id, followed_by)\nVALUES ($1, $2, $3, $4, $5)\nON CONFLICT (word_id, index_in_word)\n  DO UPDATE SET\n    morpheme = EXCLUDED.morpheme,\n    gloss_id = EXCLUDED.gloss_id,\n    followed_by = EXCLUDED.followed_by\n",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Int8",
          "Text",
          "Uuid",
          {
            "Custom": {
              "name": "segment_type",
              "kind": {
                "Enum": [
                  "Morpheme",
                  "Clitic"
                ]
              }
            }
          }
        ]
      },
      "nullable": []
    }
  },
  "2d0fce2bf80b70718b421e5ace5ecbe7bca8a2b5cb3b421ef76431c4599f0cd6": {
    "query": "select morpheme_gloss.id as gloss_id\nfrom morpheme_gloss\n  inner join\n    abstract_morpheme_tag as abstract on morpheme_gloss.tag_id = abstract.id\nwhere document_id is null and gloss = $1\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "gloss_id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "32495ddb03087a8dfa5c929ac2ed6a0d950d18ea0137bf5f00fe958e8491cc59": {
    "query": "select\n  d.*,\n  coalesce(\n    jsonb_agg(\n      jsonb_build_object(\n        'name', contributor.full_name, 'role', attr.contribution_role\n      )\n    ) filter (where contributor is not null),\n    '[]'\n  )\n  as contributors\nfrom document as d\n  left join contributor_attribution as attr on attr.document_id = d.id\n  left join contributor on contributor.id = attr.contributor_id\nwhere d.id = any($1)\ngroup by d.id,\n  attr.contributor_id,\n  attr.document_id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "title",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "group_id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 3,
          "name": "index_in_group",
          "type_info": "Int8"
        },
        {
          "ordinal": 4,
          "name": "is_reference",
          "type_info": "Bool"
        },
        {
          "ordinal": 5,
          "name": "written_at",
          "type_info": "Date"
        },
        {
          "ordinal": 6,
          "name": "audio_slice_id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 7,
          "name": "contributors",
          "type_info": "Jsonb"
        }
      ],
      "parameters": {
        "Left": [
          "TextArray"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        true,
        true,
        null
      ]
    }
  },
  "36b9fae68fe9f0285a0d9261962a98e75a2c9d930ebfb24dd9e8f238a18f729c": {
    "query": "insert into abbreviation_system (short_name, title)\nvalues ($1, $2)\non conflict (short_name) do update set\n   title = excluded.title\nreturning id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "43e42033828a07a488a1fbe4be6a5c7cea9d5c8d471d51a9fd39f939abd060f6": {
    "query": "select\n  id,\n  index_in_document,\n  document_id,\n  iiif_source_id,\n  iiif_oid\nfrom document_page\nwhere document_id = any($1)\norder by index_in_document asc\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "index_in_document",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "document_id",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "iiif_source_id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 4,
          "name": "iiif_oid",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "TextArray"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        true,
        true
      ]
    }
  },
  "4907b49b959374e20e751ebd896eae231beecdde238eb2d155c96c71f9456c49": {
    "query": "INSERT INTO morpheme_gloss (document_id, gloss, example_shape, tag_id)\n  VALUES ($1, $2, $3, $4)\nON CONFLICT (document_id, gloss)\n  DO UPDATE SET example_shape = EXCLUDED.example_shape,\n     tag_id = excluded.tag_id\nRETURNING id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text",
          "Uuid"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "4baf58fcee41b20c4682002c4781a0ecf4f737b07faffb4c9907bf6058ab481b": {
    "query": "INSERT INTO morpheme_gloss (document_id, gloss, example_shape)\n  VALUES ($1, $2, $3)\nON CONFLICT (document_id, gloss)\n  DO UPDATE SET\n    example_shape = EXCLUDED.example_shape\n  RETURNING id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "4fa72c068dcac76006c430bc59c175293cad04bf71debccb96400cc1c07087e8": {
    "query": "insert into morpheme_tag (system_id, abstract_ids, gloss)\nvalues ($1, $2, $3)\non conflict (system_id, abstract_ids) do update set\n   gloss = excluded.gloss\n",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Uuid",
          "UuidArray",
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "540a9d3aac0adbcab2fd1aebbd46610aa21f527258fcfafa0f1dfbd6c228a777": {
    "query": "select\n  id,\n  source_text,\n  simple_phonetics,\n  phonemic,\n  english_gloss,\n  commentary,\n  document_id,\n  index_in_document,\n  page_number\nfrom word\nwhere document_id = $1\norder by index_in_document\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "source_text",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "simple_phonetics",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "phonemic",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "english_gloss",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "commentary",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "document_id",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "index_in_document",
          "type_info": "Int8"
        },
        {
          "ordinal": 8,
          "name": "page_number",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        true,
        true,
        true,
        true,
        false,
        false,
        true
      ]
    }
  },
  "5b699e0fcc9467aed4c1b5ae6361341ed338c32e286e1ae47a3ded10bba0bbf2": {
    "query": "select\n  slug,\n  title\nfrom document_group\nwhere slug = $1\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "slug",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "title",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "5ed736651d677fd216c010f1dec8b0617a3d682d6a438b977185d94423e05300": {
    "query": "select\n  attr.document_id,\n  attr.contribution_role,\n  contributor.id,\n  contributor.full_name\nfrom contributor_attribution as attr\n  inner join contributor on contributor.id = attr.contributor_id\nwhere attr.document_id = any($1)\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "document_id",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "contribution_role",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 3,
          "name": "full_name",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "TextArray"
        ]
      },
      "nullable": [
        true,
        true,
        true,
        true
      ]
    }
  },
  "6f4a2cb1705e9e205444d292268a093df74510b2d066662eff477cf09607b345": {
    "query": "WITH resource AS (\nINSERT INTO audio_resource (url)\n        VALUES ($1)\n    RETURNING\n        id)\n    INSERT INTO audio_slice (resource_id, time_range)\n    SELECT\n        id,\n        $2\n    FROM\n        resource\n    RETURNING\n        id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Int8Range"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "6fafd739b5121e930be548e358988acd90453a88bda475a81cc6d017aef0ae80": {
    "query": "select\n  document.id as document_id,\n  document.is_reference,\n  word.id,\n  word.source_text,\n  word.simple_phonetics,\n  word.phonemic,\n  word.english_gloss,\n  word.recorded_at,\n  word.commentary,\n  word.index_in_document,\n  word.page_number\nfrom word\n  inner join document on document.id = word.document_id\n  left join word_segment on word_segment.word_id = word.id\n  inner join morpheme_gloss on morpheme_gloss.id = word_segment.gloss_id\nwhere morpheme_gloss.gloss = $1\n  and (morpheme_gloss.document_id = $2 or $2 is null)\ngroup by document.id, word.id\norder by document.id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "document_id",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "is_reference",
          "type_info": "Bool"
        },
        {
          "ordinal": 2,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 3,
          "name": "source_text",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "simple_phonetics",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "phonemic",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "english_gloss",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "recorded_at",
          "type_info": "Date"
        },
        {
          "ordinal": 8,
          "name": "commentary",
          "type_info": "Text"
        },
        {
          "ordinal": 9,
          "name": "index_in_document",
          "type_info": "Int8"
        },
        {
          "ordinal": 10,
          "name": "page_number",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        true,
        true,
        true,
        true,
        true,
        false,
        true
      ]
    }
  },
  "728770759c2d7e4f928ee6e867edbce9bb1fc5e23f8ce7c524aa978174c0c910": {
    "query": "select\n  word_segment.word_id,\n  word_segment.morpheme,\n  word_segment.gloss_id,\n  morpheme_gloss.gloss,\n  word_segment.followed_by as \"followed_by: SegmentType\"\nfrom word_segment\n  inner join morpheme_gloss on morpheme_gloss.id = word_segment.gloss_id\nwhere word_id = any($1)\norder by index_in_word\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "word_id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "morpheme",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "gloss_id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 3,
          "name": "gloss",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "followed_by: SegmentType",
          "type_info": {
            "Custom": {
              "name": "segment_type",
              "kind": {
                "Enum": [
                  "Morpheme",
                  "Clitic"
                ]
              }
            }
          }
        }
      ],
      "parameters": {
        "Left": [
          "UuidArray"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        true
      ]
    }
  },
  "76404f209295e2f6974d57b87534031ac6ed5336ca36cf2335e660aa3754bae3": {
    "query": "select\n  word.*,\n  paragraph.id as paragraph_id\nfrom word\n  inner join paragraph on paragraph.page_id = word.page_id\nwhere paragraph.id = any($1)\n  and word.character_range is not null\n  -- Include words that overlap with the paragraph range\n  and word.character_range && paragraph.character_range\n  -- Exclude words that start before the paragraph, which means that words are\n  -- always included in the paragraph that they start in. This is the same logic\n  -- as line breaks.\n  and word.character_range &> paragraph.character_range\n-- Include all joined primary keys in the GROUP BY clause.\ngroup by word.id,\n  paragraph.id\norder by word.character_range\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "source_text",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "simple_phonetics",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "phonemic",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "english_gloss",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "recorded_at",
          "type_info": "Date"
        },
        {
          "ordinal": 6,
          "name": "commentary",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "audio_slice_id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 8,
          "name": "document_id",
          "type_info": "Text"
        },
        {
          "ordinal": 9,
          "name": "page_number",
          "type_info": "Text"
        },
        {
          "ordinal": 10,
          "name": "index_in_document",
          "type_info": "Int8"
        },
        {
          "ordinal": 11,
          "name": "page_id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 12,
          "name": "character_range",
          "type_info": "Int8Range"
        },
        {
          "ordinal": 13,
          "name": "paragraph_id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "UuidArray"
        ]
      },
      "nullable": [
        false,
        false,
        true,
        true,
        true,
        true,
        true,
        true,
        false,
        true,
        false,
        true,
        true,
        false
      ]
    }
  },
  "783609db085cde543b2ac200a7e3b6ca49fc7afd0905408efb483a22fd37a6dd": {
    "query": "select\n  morpheme_gloss.id as gloss_id,\n  morpheme_gloss.example_shape,\n  abbreviation_system.short_name as system_name,\n  morpheme_tag.gloss,\n  abstract_morpheme_tag.title,\n  abstract_morpheme_tag.description,\n  abstract_morpheme_tag.linguistic_type\nfrom morpheme_gloss\n  inner join abstract_morpheme_tag on abstract_morpheme_tag.id = morpheme_gloss.tag_id\n  left join abbreviation_system on abbreviation_system.short_name = any($2)\n  inner join morpheme_tag on morpheme_tag.abstract_ids[1] = abstract_morpheme_tag.id\nwhere morpheme_gloss.id = any($1)\n  and morpheme_tag.system_id = abbreviation_system.id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "gloss_id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "example_shape",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "system_name",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "gloss",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "title",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "description",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "linguistic_type",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "UuidArray",
          "TextArray"
        ]
      },
      "nullable": [
        true,
        true,
        true,
        true,
        true,
        true,
        true
      ]
    }
  },
  "7860f1d60b1f09d62987a89d413a7243cb23005b6f19bb539b88311dbfbd223d": {
    "query": "select\n  document_group.slug,\n  document_group.title\nfrom document\n  inner join document_group on document_group.id = document.group_id\nwhere document.id = $1\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "slug",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "title",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "7893a479a995a4deb24303bce0679a252ff88ca7f917d50854bb0ccb59557f17": {
    "query": "insert into contributor_attribution (contributor_id, document_id, contribution_role)\nselect contributor.id, $2, $3\nfrom contributor\nwhere contributor.full_name = $1\n-- If this document already has this contributor, move on.\non conflict do nothing\n",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "7e5b9da162a6c822e027c707e850067294d662a5f1259bbba2db03742045864f": {
    "query": "select\n  d.id,\n  d.title,\n  d.written_at,\n  d.is_reference,\n  coalesce(\n    jsonb_agg(\n      jsonb_build_object(\n        'name', contributor.full_name, 'role', attr.contribution_role\n      )\n    ) filter (where contributor is not null),\n    '[]'\n  )\n  as contributors\nfrom document as d\n  left join contributor_attribution as attr on attr.document_id = d.id\n  left join contributor on contributor.id = attr.contributor_id\ngroup by d.id,\n  attr.contributor_id,\n  attr.document_id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "title",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "written_at",
          "type_info": "Date"
        },
        {
          "ordinal": 3,
          "name": "is_reference",
          "type_info": "Bool"
        },
        {
          "ordinal": 4,
          "name": "contributors",
          "type_info": "Jsonb"
        }
      ],
      "parameters": {
        "Left": []
      },
      "nullable": [
        false,
        false,
        true,
        false,
        null
      ]
    }
  },
  "80fbe479cbd3909da7a81e806aca777f753931d3c2c612911a2bedfa7fd05cbf": {
    "query": "select\n  word_segment.morpheme,\n  word.id as word_id,\n  word.source_text,\n  word.simple_phonetics,\n  word.phonemic,\n  word.english_gloss,\n  word.commentary,\n  word.document_id,\n  word.index_in_document,\n  word.page_number\nfrom morpheme_gloss\n  left join word_segment on word_segment.gloss_id = morpheme_gloss.id\n  left join word on word.id = word_segment.word_id\nwhere morpheme_gloss.gloss = $1\n  and morpheme_gloss.document_id = $2\norder by word_segment.morpheme\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "morpheme",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "word_id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 2,
          "name": "source_text",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "simple_phonetics",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "phonemic",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "english_gloss",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "commentary",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "document_id",
          "type_info": "Text"
        },
        {
          "ordinal": 8,
          "name": "index_in_document",
          "type_info": "Int8"
        },
        {
          "ordinal": 9,
          "name": "page_number",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        true,
        true,
        true,
        true,
        false,
        false,
        true
      ]
    }
  },
  "8981e87f36d0659675a8751da5ff534f693cd33a726995c59f92662eac87b84a": {
    "query": "INSERT INTO document_page (document_id, index_in_document, iiif_source_id, iiif_oid)\nVALUES ($1, $2, $3, $4)\nON CONFLICT (document_id, index_in_document)\n  DO UPDATE SET\n    index_in_document = EXCLUDED.index_in_document,\n    iiif_source_id = EXCLUDED.iiif_source_id,\n    iiif_oid = EXCLUDED.iiif_oid\n  RETURNING id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Int8",
          "Uuid",
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "8a79138bce7ccb5138248b039f7975b434d552b8c1ded144f9c519255bcd402f": {
    "query": "select\n  id,\n  source_text,\n  simple_phonetics,\n  phonemic,\n  english_gloss,\n  commentary,\n  document_id,\n  index_in_document,\n  page_number\nfrom word\nwhere source_text like any($1)\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "source_text",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "simple_phonetics",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "phonemic",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "english_gloss",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "commentary",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "document_id",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "index_in_document",
          "type_info": "Int8"
        },
        {
          "ordinal": 8,
          "name": "page_number",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "TextArray"
        ]
      },
      "nullable": [
        false,
        false,
        true,
        true,
        true,
        true,
        false,
        false,
        true
      ]
    }
  },
  "98f3ef23ebc76420a18f30502019f9d7e676ee9e7e2ebb14290beeda813c4fc4": {
    "query": "insert into contributor (full_name)\nvalues ($1)\non conflict (full_name) do update\nset full_name = EXCLUDED.full_name\n",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "a0cec5199d10a1135a4074b4620c0b45b552c38f26ecee945ef94f2afccdbe83": {
    "query": "insert into paragraph (page_id, character_range, english_translation)\nvalues ($1, $2, $3)\n",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Int8Range",
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "a24146cbf9ffcb7b7c90f722b3c295a2f55ffbe0edb36f06cc2d18df4707b549": {
    "query": "select\n  id,\n  base_url\nfrom iiif_source\nwhere id = $1\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "base_url",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "a298194bf5d484e07232d9b74f2fca6cb1d207a9f1066c6aefe697f32b03d094": {
    "query": "delete from audio_resource\nwhere id in (\n  select audio_slice.resource_id\n  from audio_slice\n    inner join document on document.audio_slice_id = audio_slice.id\n  where document.id = $1\n)\n",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "a658233f55867be6d29c0ef7ba401c9cc3a8a17d75fc0d591913ecf0cc572e37": {
    "query": "insert into character_transcription (\n  page_id, index_in_page, possible_transcriptions\n)\nvalues ($1, $2, $3)\n",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Int8",
          "TextArray"
        ]
      },
      "nullable": []
    }
  },
  "af5208c19606b217df4c074733a60fa26b4dd41cfd61c4dbd0ac053ac068dcf3": {
    "query": "-- Insert a collection with a certain slug.\nINSERT INTO document_group (slug, title)\n    VALUES ($1, $2)\nON CONFLICT (slug)\n    DO UPDATE SET\n        title = EXCLUDED.title\n    RETURNING\n        id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "afca9b69fc11aef29379ab4d753d0b644b6ee3a698f3a6e857bfb6a83a4b38f1": {
    "query": "insert into iiif_source (title, base_url)\nvalues ($1, $2)\non conflict (base_url) do update\nset title = excluded.title\nreturning id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "b19567e39d7bb61bbcdb92d41b36fdb44720639adfca52a1eec902eea802a6a2": {
    "query": "select\n  title,\n  slug\nfrom document_group\norder by title asc\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "title",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "slug",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": []
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "bae592712d6fa3dca302ad0cb3ef0891e25e84b26dc22d9650ba1fa7f4043dce": {
    "query": "INSERT INTO document (id, title, is_reference, written_at, audio_slice_id, group_id)\n  VALUES ($1, $2, $3, $4, $5, $6)\nON CONFLICT DO NOTHING\n",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Bool",
          "Date",
          "Uuid",
          "Uuid"
        ]
      },
      "nullable": []
    }
  },
  "be3fc06f104869ba1c677e02446e60381e732ad52ffbbf9786cc84ae7f2839af": {
    "query": "select\n  d.id,\n  d.title,\n  d.written_at as \"date: Date\",\n  d.index_in_group as order_index\nfrom document_group\n  inner join document as d on document_group.id = d.group_id\nwhere document_group.slug = $1\norder by d.index_in_group asc\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "title",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "date: Date",
          "type_info": "Date"
        },
        {
          "ordinal": 3,
          "name": "order_index",
          "type_info": "Int8"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        true,
        false
      ]
    }
  },
  "d307d31fafed5e2becea3f5c2d441fb0aadcf7a2cd113b699440a9989bd05f8e": {
    "query": "INSERT INTO morpheme_gloss_relation (left_document_id, left_gloss, right_document_id, right_gloss)\n  VALUES ($1, $2, $3, $4)\nON CONFLICT\n  DO NOTHING\n",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text",
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "d6377d5a54a702f7df73f287390c0c45a1309f7e705c93d49842b409a947a1fd": {
    "query": "select count(id)\nfrom word\nwhere document_id = $1\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "count",
          "type_info": "Int8"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        null
      ]
    }
  },
  "d8bc89c2d802ac2da071308eb27bdd1bc2bbdc31d64e8ccad71d4b861f8be12b": {
    "query": "select\n  id,\n  title,\n  base_url\nfrom iiif_source\nwhere id = any($1)\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "title",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "base_url",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "UuidArray"
        ]
      },
      "nullable": [
        false,
        false,
        false
      ]
    }
  },
  "e92fa009373e1da60ebaf5dab004ceef8f09f47228ecf809b0888572c959cef1": {
    "query": "INSERT INTO word (source_text, simple_phonetics, phonemic, english_gloss, recorded_at, commentary,\n  document_id, page_number, index_in_document, page_id, character_range)\n  VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)\nON CONFLICT (document_id, index_in_document)\nDO UPDATE SET\n  source_text = EXCLUDED.source_text,\n  simple_phonetics = EXCLUDED.simple_phonetics,\n  phonemic = EXCLUDED.phonemic,\n  english_gloss = EXCLUDED.english_gloss,\n  commentary = EXCLUDED.commentary\nRETURNING id\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text",
          "Text",
          "Date",
          "Text",
          "Text",
          "Text",
          "Int8",
          "Uuid",
          "Int8Range"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "ea5adbff6aa0172c1f1b9e49d173f23f4929aa522c118a06769d07dc3330f0fd": {
    "query": "select\n  abbreviation_system.short_name as system_name,\n  morpheme_tag.gloss,\n  abstract_morpheme_tag.title,\n  abstract_morpheme_tag.description,\n  abstract_morpheme_tag.linguistic_type\nfrom morpheme_tag\n  inner join\n    abstract_morpheme_tag on\n      abstract_morpheme_tag.id = any(morpheme_tag.abstract_ids)\n  inner join\n    abbreviation_system on abbreviation_system.id = morpheme_tag.system_id\nwhere abbreviation_system.short_name = $1\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "system_name",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "gloss",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "title",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "description",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "linguistic_type",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        true,
        true
      ]
    }
  },
  "f0a470d6c82093a4fbfbc15e793b984dffd1a4076d2bf47a3c9cd736fcb29f79": {
    "query": "select distinct on (word.id)\n  word.id,\n  word.source_text,\n  word.simple_phonetics,\n  word.phonemic,\n  word.english_gloss,\n  word.commentary,\n  word.document_id,\n  word.index_in_document,\n  word.page_number\nfrom morpheme_gloss\n  left join\n    morpheme_gloss_relation as rl on\n      rl.left_document_id = morpheme_gloss.document_id and rl.left_gloss = morpheme_gloss.gloss\n  left join\n    morpheme_gloss_relation as rr on\n      rr.right_document_id = morpheme_gloss.document_id and rr.right_gloss = morpheme_gloss.gloss\n  inner join\n    morpheme_gloss as other on\n      (\n        other.document_id = rl.right_document_id and other.gloss = rl.right_gloss\n      ) or (\n        other.document_id = rr.left_document_id and other.gloss = rr.left_gloss\n      )\n  inner join\n    word_segment on\n      word_segment.gloss_id = other.id or word_segment.gloss_id = morpheme_gloss.id\n  inner join word on word.id = word_segment.word_id\nwhere morpheme_gloss.gloss = $1 and morpheme_gloss.document_id = $2\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "source_text",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "simple_phonetics",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "phonemic",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "english_gloss",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "commentary",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "document_id",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "index_in_document",
          "type_info": "Int8"
        },
        {
          "ordinal": 8,
          "name": "page_number",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        true,
        true,
        true,
        true,
        false,
        false,
        true
      ]
    }
  },
  "f86a2f62b58b5b404883e127574947027ff7a38f8ea4058a7dc4e9e68626c164": {
    "query": "select\n  id,\n  title,\n  base_url\nfrom iiif_source\nwhere title = $1\n",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "title",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "base_url",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        false
      ]
    }
  }
}