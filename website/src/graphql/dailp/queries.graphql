query CollectionsListing {
  allCollections {
    name
    slug
  }
}

query DocumentsPages {
  allDocuments {
    id
    slug
    isReference
  }
}

query AnnotatedDocument($slug: String!) {
  document(slug: $slug) {
    id
    title
    slug
    isReference
    breadcrumbs(superCollection: "") {
      name
      slug
    }
    date {
      year
    }
    sources {
      name
      link
    }
    audioRecording {
      resourceUrl
      startTime
      endTime
    }
    translatedPages {
      image {
        url
      }
    }
  }
}

query DocumentContents(
  $slug: String!
  $morphemeSystem: CherokeeOrthography!
  $isReference: Boolean!
) {
  document(slug: $slug) {
    translatedPages @skip(if: $isReference) {
      pageNumber
      paragraphs {
        source {
          __typename
          ... on AnnotatedForm {
            ...FormFields
          }
        }
        translation
      }
    }
    forms @include(if: $isReference) {
      __typename
      ...FormFields
    }
  }
}

fragment FormFields on AnnotatedForm {
  index
  source
  romanizedSource(system: $morphemeSystem)
  phonemic
  segments(system: $morphemeSystem) {
    morpheme
    gloss
    matchingTag {
      tag
      title
    }
    segmentType
    previousSeparator
  }
  englishGloss
  commentary
  audioTrack {
    index
    resourceUrl
    startTime
    endTime
  }
}

query Collection($slug: String!) {
  collection(slug: $slug) {
    name
    documents {
      id
      slug
      title
      date {
        year
      }
      orderIndex
    }
  }
}

query WordSearch($query: String!) {
  wordSearch(query: $query) {
    source
    normalizedSource
    romanizedSource(system: LEARNER)
    englishGloss
    index
    document {
      slug
      isReference
    }
  }
}

query AllSources {
  allDocuments {
    isReference
    id
    slug
    title
    date {
      year
    }
    contributors {
      name
    }
    formCount
  }
}

query Glossary($system: CherokeeOrthography!) {
  allTags(system: $system) {
    tag
    title
    definition
    morphemeType
  }
}

query Timeline($gloss: String!) {
  morphemeTimeClusters(gloss: $gloss, clusterYears: 50) {
    start {
      year
    }
    end {
      year
    }
    forms {
      source
      normalizedSource
      romanizedSource(system: LEARNER)
      phonemic
      documentId
      englishGloss
    }
  }
}

query DocumentDetails($slug: String!) {
  document(slug: $slug) {
    id
    slug
    title
    breadcrumbs(superCollection: "") {
      name
      slug
    }
    date {
      year
    }
    contributors {
      name
      role
    }
    sources {
      name
      link
    }
  }
}

query EditablePage($id: String!) {
  page(id: $id) {
    id
    title
    body {
      __typename
      ... on Markdown {
        content
      }
    }
  }
}

query Tag($gloss: String!, $system: CherokeeOrthography!) {
  tag: morphemeTag(id: $gloss, system: $system) {
    morphemeType
    tag
    title
    definition
  }
}

query Morpheme($documentId: UUID, $morphemeGloss: String!) {
  documents: morphemesByDocument(
    documentId: $documentId
    morphemeGloss: $morphemeGloss
  ) {
    documentType
    forms {
      index
      source
      normalizedSource
      englishGloss
      document {
        slug
      }
    }
  }
}

mutation NewPage($data: JSON!) {
  updatePage(data: $data)
}

query DocSlice($slug: String!, $start: Int!, $end: Int) {
  document(slug: $slug) {
    forms(start: $start, end: $end) {
      englishGloss
      # add other needed forms in new ticket
    }
  }
}
